#!/bin/bash

echo "[II] Installing APT packages..."
sudo apt-get install aptitude
sudo aptitude install \
    build-essential \
    git \
    irssi \
    keepassx \
    keychain \
    libpq-dev \
    mplayer \
    poedit \
    python-dev \
    python-pip \
    tmux \
    tree \
    vim-gnome \
    vim-gtk \
    zsh

sudo pip install \
    fabric \
    pip \
    virtualenv

if [[ ! -d "$HOME/.vim" ]]; then
    echo "[II] Checking out vimfiles..."
    git clone https://exhuma@github.com/exhuma/vimfiles $HOME/.vim
    git clone https://github.com/gmarik/Vundle.vim.git $HOME/.vim/bundle/Vundle.vim
    vim +PluginInstall +qall
else
    echo "[II] vimfiles already in place."
fi

if [[ ! -f "$HOME/.dropbox-dist/dropboxd" ]]; then
    echo "[II] installing dropbox..."
    (cd ~ && wget -O - "https://www.dropbox.com/download?plat=lnx.x86" | tar xzf -)
else
    echo "[II] dropbox already installed"
fi

if [[ "$SHELL" != "/usr/bin/zsh" && -e /usr/bin/zsh ]]; then
    chsh
else
    echo "[II] Already on zsh, or zsh not available on this system"
fi

# Mouse setup
echo "[II] Mouse setup..."
xinput --list | grep pointer
read -p "Pointer Device ID: " MOUSEDEV
xinput list-props ${MOUSEDEV} | grep "Constant Decel"
read -p "Decelleration ID: " DECCEL
xinput set-prop ${MOUSEDEV} ${DECCEL} 2.0
